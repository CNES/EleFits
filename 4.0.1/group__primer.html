<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EleFits: What&#39;s a Fits file?</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="elefits_notext.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EleFits
   &#160;<span id="projectnumber">4.0.1</span>
   </div>
   <div id="projectbrief">A modern C++ API on top of CFitsIO</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">What's a Fits file?</div>  </div>
</div><!--header-->
<div class="contents">
<p>The structure and contents of a <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> file, and how they relate to EleFits. </p>
<h1><a class="anchor" id="primer-intro"></a>
Yet another Fits primer!</h1>
<p>Why so, when there are many nice examples already available? Because this one shows the mapping between the components of a <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> file, and the classes we implemented. Of course, feel free to have a look to the others, like that of the <a href="https://fits.gsfc.nasa.gov/fits_primer.html">Fits support office</a>.</p>
<h1><a class="anchor" id="primer-sif"></a>
A bit of history: Header unit and data unit</h1>
<p>The <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> format appeared in 1981, as a single-image file format. At that time, a <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> file only consisted of a <em>header unit</em>, full of metadata, and a <em>data unit</em>, full of... data.</p>
<p>The format definition has drammatically evolved, but with backward compatibility in mind. Therefore, the concepts of header and data units are still valid. A <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> file made of a single image is named <em>Single Image <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a></em> file, or SIF file in short.</p>
<h2><a class="anchor" id="primer-sif-header"></a>
Header unit</h2>
<p>The header unit is a block of ASCII characters, which you can display in a 80-character wide terminal. Each chunk of 80 characters is named a <em>record</em>. Most records are <em>keyword records</em>, which store a keyword-value pair as follows:</p>
<pre class="fragment">KEYWORD = VALUE
</pre><p>A comment can be appended, separated with a slash (<code>/</code>):</p>
<pre class="fragment">KEYWORD = VALUE / comment
</pre><p>A unit can be inserted inside the comment, enclosed in square brackets:</p>
<pre class="fragment">KEYWORD = VALUE / [unit] comment
</pre><p>The value can be:</p><ul>
<li>an integer,</li>
<li>a floating-point number, possibly in exponential notation,</li>
<li>a complex number (a pair of floating-point numbers),</li>
<li>a string.</li>
</ul>
<p>In EleFits, keyword records are instantiated as <code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code> objects, templated with the value type.</p>
<h2><a class="anchor" id="primer-sif-data"></a>
Primary data unit</h2>
<p>The data unit of a SIF file is an <em>n</em>-dimensional array, like a 0D nothing, a 1D vector, a 2D image, a 3D data cube, a 4D color video, or whatever fancier array you wish (with <em>n</em>&lt;1000, but this should not be a show-stopper in general).</p>
<p>(Be patient, we'll explain the <em>Primary</em> word in the next section.)</p>
<p>Pixels are stored contiguously, and the properties of the image are stored in the header unit as special records. For example, the size of the image is given by the values associated with keys <code>NAXIS1</code>, <code>NAXIS2</code>, <code>NAXIS3</code>... The pixel value type can be an 8- to 64-bit integer, or a 32- or 64-bit floating-point. The value type is again encoded in the header unit with keyword <code>BITPIX</code>. Here is a typical Primary header unit:</p>
<div class="fragment"><div class="line">SIMPLE  =                    T / file does conform to FITS standard             </div>
<div class="line">BITPIX  =                   16 / number of bits per data pixel                  </div>
<div class="line">NAXIS   =                    2 / number of data axes                            </div>
<div class="line">NAXIS1  =                 2048 / length of data axis 1                          </div>
<div class="line">NAXIS2  =                 2066 / length of data axis 2                          </div>
<div class="line">TELESCOP= <span class="stringliteral">&#39;EUCLID&#39;</span>             / telescope <a class="code" href="namespaceEuclid_1_1Cfitsio_1_1FileAccess.html#ace028f35c207bf1efa113c9e13273b98">name</a>                                 </div>
<div class="line">EXPTIME =               1500.0 / [s] exposure <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/c/time.html">time</a>                              </div>
<div class="line">END</div>
</div><!-- fragment --><p>The class which represents a SIF file is <code><a class="el" href="classEuclid_1_1Fits_1_1SifFile.html" title="Single image Fits file handler.">SifFile</a></code>. That which represents the header is <code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code>, and that which represent the array is <code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code>. In EleFits, a <code><a class="el" href="classEuclid_1_1Fits_1_1SifFile.html" title="Single image Fits file handler.">SifFile</a></code> can therefore simply be seen like a structure made of a <code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code> and an <code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code>, accessed by getters <code><a class="el" href="classEuclid_1_1Fits_1_1SifFile_afb6766973e6cf8bc5b872ebbb10d44cb.html#afb6766973e6cf8bc5b872ebbb10d44cb" title="Access the header unit.">SifFile::header()</a></code> and <code><a class="el" href="classEuclid_1_1Fits_1_1SifFile.html#a28d10350fd77f49375b7b7383c608e04" title="Access the data unit.">SifFile::raster()</a></code>, respectively.</p>
<h1><a class="anchor" id="primer-mef"></a>
Newer Fits: Extensions</h1>
<p>During several decades, the definition of the <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> format has evolved quite a lot. First, <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> has become a multi-image format, where header and data units (HDUs) are written in sequence. The first HDU is referred to as Primary array, Primary HDU, or simply <em>Primary</em>. The subsequent HDUs, if any, are named <em>extensions</em>.</p>
<p>Another vast improvement of the standard is the support for tabular data. As opposed to values in arrays, the values in tables can have different types (although the values of a same column share the same type). Table HDUs are necessarily extensions: the Primary is always an image HDU. This means that files which store only tabular data start with a header-only Primary, that is, an image HDU with empty array.</p>
<p>There are two types of table HDUs: ASCII tables and binary tables. Binary table columns can be scalar (one value per cell) or vector (several values per cell). A more recent addition to the standard is binary tables with vector columns of varying size, i.e. the cells of a single column have different value counts. ASCII tables are generally no more used, and are not supported at all by EleFits. Only binary tables with columns of fixed width are available.</p>
<p><a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> files with extensions are known as <em>Multi-Extension <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a></em> (MEF) files.</p>
<p>Image and binary table HDUs are respectively handled with <code><a class="el" href="classEuclid_1_1Fits_1_1ImageHdu.html" title="Image HDU reader-writer.">ImageHdu</a></code> and <code><a class="el" href="classEuclid_1_1Fits_1_1BintableHdu.html" title="Binary table HDU reader-writer.">BintableHdu</a></code>. Like for the Primary, the handler class for the header units of the extensions is <code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code>, and for the image data units (the arrays), it is <code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code>. Binary table data units can be read and written column-wise with <code><a class="el" href="classEuclid_1_1Fits_1_1BintableColumns.html" title="Column-wise reader-writer for the binary table data unit.">BintableColumns</a></code>, or row-wise with <code>BintableRows</code>.</p>
<h1><a class="anchor" id="primer-wrapup"></a>
Wrap-up</h1>
<p>A <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> file is composed of contiguous HDUs, themselves made of an ASCII header unit, and a binary data unit. The first HDU is named Primary, and is necessarily an image, which may be empty. The following HDUs are named extensions, and they may be images or binary tables.</p>
<p><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a> units are a sequence of records, image data units are <em>n</em>-D arrays, and binary table data units are a sequence of rows which represent scalar or vector columns.</p>
<p>There is almost a 1-to-1 mapping of the <a class="el" href="namespaceEuclid_1_1Fits.html" title="Wrapper classes to read and write Fits file contents.">Fits</a> and EleFits structures:</p>
<table class="markdownTable">
<tr>
<th>File structure</th><th>Class structure </th></tr>
<tr>
<td>SIF file<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit<ul>
<li>array </li>
</ul>
</li>
</ul>
</td><td><p class="starttd"><code><a class="el" href="classEuclid_1_1Fits_1_1SifFile.html" title="Single image Fits file handler.">SifFile</a></code></p><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Raster.html" title="Raster of a n-dimensional image (2D by default).">Raster</a></code></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td></tr>
<tr>
<td>MEF file<ul>
<li>image HDUs<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit<ul>
<li>array</li>
</ul>
</li>
</ul>
</li>
<li>binary table HDUs<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit (column-wise)<ul>
<li>columns</li>
</ul>
</li>
<li>data unit (row-wise)<ul>
<li>rows </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td><code><a class="el" href="classEuclid_1_1Fits_1_1MefFile.html" title="Multi-Extension Fits file reader-writer.">MefFile</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageHdu.html" title="Image HDU reader-writer.">ImageHdu</a></code>s<ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Raster.html" title="Raster of a n-dimensional image (2D by default).">Raster</a></code></li>
</ul>
</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1BintableHdu.html" title="Binary table HDU reader-writer.">BintableHdu</a></code>s<ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1BintableColumns.html" title="Column-wise reader-writer for the binary table data unit.">BintableColumns</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Column.html" title="Binary table column data and metadata.">Column</a></code>s</li>
</ul>
</li>
<li><code>BintableRows</code><ul>
<li>User-defined objects </li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr>
</table>
<p>For more details, head to the following pages:</p><ul>
<li><a href="https://fits.gsfc.nasa.gov/fits_primer.html">The primer of the Fits support office</a></li>
<li><a href="https://fits.gsfc.nasa.gov/fits_standard.html">The Fits standard</a></li>
<li><a class="el" href="group__handlers.html">File and HDU handlers</a></li>
<li><a class="el" href="group__data__classes.html">Data classes</a></li>
<li><a class="el" href="tuto.html">Tutorial</a> </li>
</ul>
</div><!-- contents -->
<div class="ttc" id="anamespaceEuclid_1_1Cfitsio_1_1FileAccess_html_ace028f35c207bf1efa113c9e13273b98"><div class="ttname"><a href="namespaceEuclid_1_1Cfitsio_1_1FileAccess.html#ace028f35c207bf1efa113c9e13273b98">Euclid::Cfitsio::FileAccess::name</a></div><div class="ttdeci">std::string name(fitsfile *fptr)</div><div class="ttdoc">Get the file name.</div></div>
<div class="ttc" id="atime_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/c/time.html">std::time</a></div><div class="ttdeci">T time(T... args)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19
</small></address>
</body>
</html>
