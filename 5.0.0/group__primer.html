<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.9.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EleFits: What&#39;s a FITS file?</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <div id="top">
      <!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectlogo"><a href="https://cnes.github.io/EleFits/"><img alt="Logo"
                    src="elefits_notext.png" /></a></td>
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">EleFits
                  <span id="projectnumber">&#160;5.0.0</span>
                </div>
                <div id="projectbrief">A modern C++ API on top of CFITSIO</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
      <!-- GitHub corner -->
      <a href="https://github.com/CNES/EleFits" class="github-corner" aria-label="View source on GitHub"><svg
          viewBox="0 0 250 250" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path
            d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
            fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path
            d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
            fill="currentColor" class="octo-body"></path>
        </svg></a>
      <!-- GitHub corner --><!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">What's a FITS file?</div></div>
</div><!--header-->
<div class="contents">
<p >The structure and contents of a FITS file, and how they relate to EleFits. </p>
<h1><a class="anchor" id="primer-intro"></a>
Yet another FITS primer!</h1>
<p >Why so, when there are many nice examples already available? Because this one shows the mapping between the components of a FITS file, and the classes we implemented. Of course, feel free to have a look at the others, like that of the <a href="https://fits.gsfc.nasa.gov/fits_primer.html">FITS support office</a> or even <a href="https://fits.gsfc.nasa.gov/fits_standard.html">the FITS standard</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Deviations from the standard or CFITSIO wording are outlined in such note blocks.</dd></dl>
<p>At the end of some sections, a "see also" paragraph points to other documentation pages, or to more advanced topics out of the scope of this introductory page but which are good to know.</p>
<p >Definitions of the introduced terms are recalled in a glossary at the bottom of the page.</p>
<h1><a class="anchor" id="primer-sif"></a>
A bit of history: Header unit and data unit</h1>
<p >The simplest form of FITS file is as <em>Single Image FITS</em> (SIF) file, which is the initial FITS format, as described in 1981. A SIF file only consists of a <em>header unit</em>, full of metadata, followed by a <em>data unit</em>, full of... data.</p>
<h2><a class="anchor" id="primer-sif-header"></a>
Header unit</h2>
<p >The header unit is a block of ASCII characters, organized in chunks of 80 characters named records. Most records are <em>keyword records</em>, which store a key-value pair as follows:</p>
<pre class="fragment">KEY     = VALUE
</pre><p >The key is at most 8-character long.</p>
<p >The value can be:</p><ul>
<li>a Boolean value (<code>T</code> or <code>F</code>);</li>
<li>an integer;</li>
<li>a floating-point number, possibly in exponential notation;</li>
<li>a complex number (a pair of floating-point numbers);</li>
<li>a string.</li>
</ul>
<pre class="fragment">BOOL    =                    T
INT     =                    3
FLOAT   =               3.00e8
COMPLEX =       (28.06, 19.89)
STRING  = 'HEY'
</pre><p >A comment can be appended, separated from the value by a slash (<code>/</code>):</p>
<pre class="fragment">KEYWORD = VALUE / comment
</pre><p >And a unit can be inserted between the slash and the comment, enclosed in square brackets:</p>
<pre class="fragment">KEYWORD = VALUE / [unit] comment
</pre><dl class="section note"><dt>Note</dt><dd>In the FITS standard and in CFITSIO, the key of a keyword record is not named "keyword", but "name". In CFITSIO, "keyword" denotes the full keyword record instead. In EleFits, it seemed to us more natural to name "record" the keyword record and "keyword" its key.</dd>
<dd>
What the FITS standard calls "comment" includes the unit. In EleFits, the unit is excluded. CFITSIO uses both options. EleFits refers to the comment with unit as the "raw comment".</dd>
<dd>
The naming conventions of the FITS standard, CFITSIO and EleFits for the keyword records are compared below: <table class="fieldtable">
<tr>
<th>EleFits</th><th>Standard</th><th>CFITSIO</th><th>Example </th></tr>
<tr>
<td>Record</td><td>Keyword record</td><td>Keyword or Keyword record</td><td><code>EXPTIME = 1500.0 / [s] exposure time</code> </td></tr>
<tr>
<td>Keyword</td><td>Name</td><td>Name or Keyword</td><td><code>EXPTIME</code> </td></tr>
<tr>
<td>Value</td><td>Value</td><td>Value</td><td><code>1500.0</code> </td></tr>
<tr>
<td>Raw comment</td><td>Comment</td><td>Comment</td><td><code>[s] exposure time</code> </td></tr>
<tr>
<td>Unit</td><td>Unit</td><td>Unit</td><td><code>s</code> </td></tr>
<tr>
<td>Comment</td><td>Unnamed</td><td>Comment or Unnamed</td><td><code>exposure time</code> </td></tr>
</table>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="group__header__data__classes.html" title="Classes to store header unit data.">Header data classes</a></li>
<li>Keyword records with long string values</li>
<li>Non-valued keywords records (e.g. <code>COMMENT</code>)</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="primer-sif-data"></a>
Image data unit</h2>
<p >The data unit of a SIF file is an <em>n</em>-dimensional array, like a 0D nothing, a 1D vector, a 2D image, a 3D data cube, a 4D color video, or whatever fancier array you wish (with <em>n</em> &lt; 1000, but this should not be a show-stopper in general).</p>
<p >Pixels are stored contiguously (in row-major order) in binary format, and the properties of the image are stored in the header unit as special records. For example, the size of the image is given by the values associated with keys <code>NAXIS1</code>, <code>NAXIS2</code>, <code>NAXIS3</code>... The pixel value type can be an 8- to 64-bit integer, or a 32- or 64-bit floating-point. The value type is also encoded in the header unit with keyword <code>BITPIX</code>. Here is a typical Primary header unit:</p>
<div class="fragment"><div class="line">SIMPLE  =                    T / file does conform to FITS standard             </div>
<div class="line">BITPIX  =                   16 / number of bits per data pixel                  </div>
<div class="line">NAXIS   =                    2 / number of data axes                            </div>
<div class="line">NAXIS1  =                 2048 / length of data axis 1                          </div>
<div class="line">NAXIS2  =                 2066 / length of data axis 2                          </div>
<div class="line">TELESCOP= <span class="stringliteral">&#39;EUCLID&#39;</span>             / telescope name                                 </div>
<div class="line">EXPTIME =               1500.0 / [s] exposure time                              </div>
<div class="line">END</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>FITS' arrays are EleFits' <em>rasters</em>. "Array" is already ambiguous in C++, and we didn't want to introduce more confusion. "Raster" is more precise. More details on the name are given in <code><a class="el" href="classEuclid_1_1Fits_1_1Raster.html" title="Data of a n-dimensional image (2D by default).">Raster</a></code>'s documentation.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="group__file__handlers.html" title="Access and create files and HDUs.">File handlers</a></li>
<li><a class="el" href="group__image__data__classes.html" title="Image data unit containers and tools.">Image data classes</a></li>
<li><a class="el" href="group__types.html">On types</a></li>
<li>Signed byte and unsigned integer pixel types (reserved use of keyword <code>BZERO</code>)</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="primer-mef"></a>
Newer FITS: Extensions</h1>
<h2><a class="anchor" id="primer-mef-hdus"></a>
Header and Data Unit</h2>
<p >During several decades, the format definition has drammatically evolved, but with backward compatibility in mind. The header unit and data unit are still the building blocks of a FITS file. In 1994, FITS has become a multi-image format, where <em>Header and Data Units</em> (HDUs), made of one header unit and one data unit, are written in sequence. The first HDU is referred to as Primary array, Primary HDU, or simply <em>Primary</em>, and is made exactly like a SIF file (in other words, a SIF file is a FITS file with one HDU). The subsequent HDUs, if any, are named <em>extensions</em>. FITS files with extensions are known as <em>Multi-Extension FITS</em> (MEF) files.</p>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="group__file__handlers.html" title="Access and create files and HDUs.">File handlers</a></li>
</ul>
</dd></dl>
<h2><a class="anchor" id="primer-mef-bintable-data"></a>
Binary table data unit</h2>
<p >Another major improvement of the standard is the support for tabular data in 1995. As opposed to values in arrays, the values in tables can have different types (although the values of a same column share the same type). Table HDUs are necessarily extensions: the Primary is always an image HDU. This means that files which store only tabular data start with a header-only Primary, that is, an image HDU with empty array.</p>
<p >There are two types of table HDUs: ASCII tables and binary tables. ASCII tables are hardly used anymore, and are not supported at all by EleFits. Binary tables are sequences of rows, themselves made of <em>entries</em>. Obviously, they can be seen as columns made of entries, but the FITS file is written row-wise. Binary table entries can be <em>scalar</em> (one element per entry) or <em>vector</em> (several elements per entry). In the latter case, entries can even be <em>multidimensional</em>, and seen as rasters like in image data units.</p>
<p >A more recent addition to the standard is binary tables with vector columns of varying size, i.e. the entries of a single column have different value counts. This is not supported by EleFits.</p>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="group__bintable__data__classes.html" title="Binary table data unit containers and tools.">Binary table data classes</a></li>
</ul>
</dd></dl>
<h1><a class="anchor" id="primer-wrapup"></a>
Wrap-up</h1>
<p >A FITS file is composed of contiguous HDUs, themselves made of an ASCII header unit, and a binary data unit. The first HDU is named Primary, and is necessarily an image, which may be empty. The following HDUs are named extensions, and they may be images or binary tables.</p>
<p >Header units are a sequence of records, image data units are <em>n</em>-D arrays, and binary table data units are a sequence of rows which represent scalar or vector entries.</p>
<p >There is almost a 1-to-1 mapping of the FITS and EleFits structures:</p>
<table class="fieldtable">
<tr>
<th>File structure</th><th>Class structure </th></tr>
<tr>
<td>SIF file<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit<ul>
<li>array </li>
</ul>
</li>
</ul>
</td><td><p class="starttd"><code><a class="el" href="classEuclid_1_1Fits_1_1SifFile.html" title="Single image FITS file handler.">SifFile</a></code></p><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Raster.html" title="Data of a n-dimensional image (2D by default).">Raster</a></code></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td></tr>
<tr>
<td>MEF file<ul>
<li>image HDUs<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit<ul>
<li>array</li>
</ul>
</li>
</ul>
</li>
<li>binary table HDUs<ul>
<li>header unit<ul>
<li>records</li>
</ul>
</li>
<li>data unit (column-wise)<ul>
<li>columns</li>
</ul>
</li>
<li>data unit (row-wise)<ul>
<li>rows </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td><code><a class="el" href="classEuclid_1_1Fits_1_1MefFile.html" title="Multi-Extension FITS file reader-writer.">MefFile</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageHdu.html" title="Image HDU reader-writer.">ImageHdu</a></code>s<ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1ImageRaster.html" title="Reader-writer for the image data unit.">ImageRaster</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Raster.html" title="Data of a n-dimensional image (2D by default).">Raster</a></code></li>
</ul>
</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1BintableHdu.html" title="Binary table HDU reader-writer.">BintableHdu</a></code>s<ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Header.html" title="Reader-writer for the header unit.">Header</a></code><ul>
<li><code><a class="el" href="structEuclid_1_1Fits_1_1Record.html" title="Keyword-value pair with optional unit and comment.">Record</a></code>s</li>
</ul>
</li>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1BintableColumns.html" title="Column-wise reader-writer for the binary table data unit.">BintableColumns</a></code><ul>
<li><code><a class="el" href="classEuclid_1_1Fits_1_1Column.html" title="Binary table column data and metadata.">Column</a></code>s </li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a href="https://fits.gsfc.nasa.gov/fits_primer.html">The primer of the FITS support office</a></li>
<li><a href="https://fits.gsfc.nasa.gov/fits_standard.html">The FITS standard</a></li>
<li><a class="el" href="group__data__classes.html">Data classes</a></li>
<li><a class="el" href="group__handlers.html">File and HDU handlers</a></li>
<li><a class="el" href="tuto.html">Tutorial</a></li>
</ul>
</dd></dl>
<h1><a class="anchor" id="primer-glossary"></a>
Glossary</h1>
<p >At file level:</p><ul>
<li><em>HDU (Header and Data Units):</em> A header unit and optional data unit.</li>
<li><em>Primary:</em> The first HDU.</li>
<li><em>Extension:</em> An HDU which is not the Primary.</li>
<li><em>SIF (Single Image FITS) file:</em> A FITS file made of a single HDU.</li>
<li><em>MEF (Multi-Extension FITS) file:</em> A FITS file made of several HDUs.</li>
</ul>
<p >In an HDU:</p><ul>
<li><em>Header unit:</em> A sequence of records.</li>
<li><em>Data unit:</em> The binary part of an HDU, which is a sequence of pixel values for image HDUs or a sequence of rows for binary table HDUs.</li>
</ul>
<p >In a header:</p><ul>
<li><em>Keyword record:</em> An 80-ASCII character string which represents some metadata made of a keyword, value, unit and comment.</li>
<li><em>Keyword:</em> The key of a keyword record.</li>
</ul>
<p >In an image data unit:</p><ul>
<li><em>Raster:</em> An <em>n</em>-D array or values stored contiguously, in row-major order.</li>
</ul>
<p >In a binary table data unit:</p><ul>
<li><em>Entry:</em> A cell of a table HDU, i.e. the intersection of a row and column; It may contain several elements!</li>
<li><em>Element:</em> A single value of an entry, of simple type (e.g. one character of a string entry).</li>
<li><em>Scalar entry:</em> An entry which contains one element.</li>
<li><em>Vector entry:</em> An entry which contains several elements.</li>
<li><em>Multidimensional entry:</em> A vector entry which can be viewed as a raster. </li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<hr class="footer" />
<address class="footer"><small>
    © Copyright 2019-2022 CNES and contributors (for the Euclid Science Ground Segment).
    <br>
    The EleFits documentation is licensed under a
    <a rel="license" href="md_LICENSE.html">LGPL-3.0-or-later</a> license.
    <br>
    It is generated by <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.9.2
    with a theme adapted from <a href="https://github.com/jothepro/doxygen-awesome-css">Doxygen Awesome</a>
    and using <a href="https://github.com/tholman/github-corners">GitHub Corners</a>.
    Thank you all!
  </small></address>
</body>
</html>