<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.9.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EleFits: Project overview</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <div id="top">
      <!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectlogo"><a href="https://cnes.github.io/EleFits/"><img alt="Logo"
                    src="elefits_notext.png" /></a></td>
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">EleFits
                  <span id="projectnumber">&#160;5.0.0</span>
                </div>
                <div id="projectbrief">A modern C++ API on top of CFITSIO</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
      <!-- GitHub corner -->
      <a href="https://github.com/CNES/EleFits" class="github-corner" aria-label="View source on GitHub"><svg
          viewBox="0 0 250 250" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path
            d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
            fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path
            d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
            fill="currentColor" class="octo-body"></path>
        </svg></a>
      <!-- GitHub corner --><!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Project overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <img src="elefits_square.svg" alt="" style="pointer-events: none;" class="inline" title="EleFits logo"/></p>
<h1><a class="anchor" id="autotoc_md117"></a>
Purpose and scope</h1>
<p >EleFits (Euclid libraries and executables for FITS) is a modern C++ package to read and write FITS files which focuses on safety, user-friendliness, and performance. EleFits provides the only C++ FITS library which features a fully consistent and optimal internal type management system. Nevertheless, the API is templated and agnostic of the underlying architecture, which makes usage straightforward. EleFits is compact and involves as few parameters as possible, which makes it both simple and robust. As compared to CFITSIO, the benefits are mainly those of C++ over C:</p>
<ul>
<li>No raw pointers for a safe memory management;</li>
<li>No type codes but template traits classes which handle architecture specifics;</li>
<li>No error codes but a proper exception handling;</li>
<li>Structures dedicated to data storage;</li>
<li>A lightweight class hierarchy to represent the actual FITS organization (e.g. HDUs, records, columns).</li>
</ul>
<p >Furthermore, exclusive features are provided, like HDU selectors and automatic buffering of binary tables.</p>
<p >To maximize performance, EleFits is built as a CFITSIO wrapper as thin as possible. While the two libraries are generally equivalent, optimizations implemented internally make EleFits even faster in some classical cases, unless the CFITSIO user spends considerable development efforts.</p>
<h1><a class="anchor" id="autotoc_md118"></a>
Example usages</h1>
<p >The EleFits API was specifically designed to be very fluent and compact. The following (a bit extreme) example shows how natural it is to read a column named "RA" in the 4th extension of a Multi-Extension FITS (MEF) file:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> ra = MefFile(<span class="stringliteral">&quot;file.fits&quot;</span>, FileMode::READ).access&lt;BintableColumns&gt;(4).read&lt;double&gt;(<span class="stringliteral">&quot;RA&quot;</span>);</div>
</div><!-- fragment --><p >A more realistic example is creating a Single Image FITS (SIF) file with a keyword record and an array:</p>
<div class="fragment"><div class="line"><span class="comment">// Given:</span></div>
<div class="line"><span class="comment">// - string filename: The file name</span></div>
<div class="line"><span class="comment">// - string keyword: The keyword record name</span></div>
<div class="line"><span class="comment">// - int value: The keyword record value</span></div>
<div class="line"><span class="comment">// - string comment: The keyword record comment</span></div>
<div class="line"><span class="comment">// - long width, height: The image size</span></div>
<div class="line"><span class="comment">// - float[width * height] data: The image values</span></div>
<div class="line"> </div>
<div class="line">SifFile f(filename, FileMode::CREATE);</div>
<div class="line">f.header().write(keyword, value, <span class="stringliteral">&quot;&quot;</span>, comment);</div>
<div class="line">f.raster().write(<a class="code hl_function" href="classEuclid_1_1Fits_1_1Raster_a52ac046d361667c4f6df6c1f8e33ca54.html#a52ac046d361667c4f6df6c1f8e33ca54">makeRaster</a>(data, width, height));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// For comparison, here is the same use case implemented with CCfits:</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">long</span> shape[] = { width, height };</div>
<div class="line"><span class="keyword">auto</span> fits = std::make_unique&lt;FITS&gt;(filename, SHORT_IMG, 2, shape);</div>
<div class="line"><span class="keyword">auto</span>&amp; primary = fits-&gt;pHDU();</div>
<div class="line">primary.addKey(name, value, comment);</div>
<div class="line">primary.write(1, width * height, data);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// And with CFITSIO:</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">long</span> shape[] = { width, height };</div>
<div class="line"><span class="keywordtype">int</span> status = 0;</div>
<div class="line">fitsfile* fptr = <span class="keyword">nullptr</span>;</div>
<div class="line">fits_create_file(&amp;fptr, filename.c_str(), &amp;status);</div>
<div class="line">fits_create_img(fptr, SHORT_IMG, 2, shape, &amp;status);</div>
<div class="line">fits_write_key(fptr, TDOUBLE, name.c_str(), &amp;value, comment.c_str(), &amp;status);</div>
<div class="line">fits_write_img(fptr, TSHORT, 1, width * height, data, &amp;status);</div>
<div class="ttc" id="aclassEuclid_1_1Fits_1_1Raster_a52ac046d361667c4f6df6c1f8e33ca54_html_a52ac046d361667c4f6df6c1f8e33ca54"><div class="ttname"><a href="classEuclid_1_1Fits_1_1Raster_a52ac046d361667c4f6df6c1f8e33ca54.html#a52ac046d361667c4f6df6c1f8e33ca54">Euclid::Fits::Raster::makeRaster</a></div><div class="ttdeci">Raster&lt; typename TContainer::value_type, sizeof...(Longs), TContainer &gt; makeRaster(TContainer &amp;&amp;data, Longs... shape)</div><div class="ttdoc">Shortcut to create a raster from a shape and data without specifying the template parameters.</div><div class="ttdef"><b>Definition:</b> Raster.h:378</div></div>
</div><!-- fragment --><p >In addition, exclusive features are provided to simplify the implementation of classical use cases. A few examples are given below.</p>
<p >Files are iterable, and selectors enable looping over filtered HDUs (here, newly created image HDUs):</p>
<div class="fragment"><div class="line"><span class="comment">// Given:</span></div>
<div class="line"><span class="comment">// - MefFile f: The MEF file handler</span></div>
<div class="line"><span class="comment">// - processNewImage: A user-defined function</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hdu : f.filter&lt;ImageHdu&gt;(HduCategory::Created)) {</div>
<div class="line">  processNewImage(hdu);</div>
<div class="line">}</div>
</div><!-- fragment --><p >Heterogeneous collections of keyword records can be parsed and written, and a comprehensive type conversion system is provided:</p>
<div class="fragment"><div class="line"><span class="comment">// Given:</span></div>
<div class="line"><span class="comment">// - Header header: The header unit handler</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> records = header.parseAll(KeywordCategory::Reserved);</div>
<div class="line"><span class="keyword">auto</span> instrument = records.as&lt;<a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a>&gt;(<span class="stringliteral">&quot;INSTRUME&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> exptime = records.as&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;EXPTIME&quot;</span>);</div>
<div class="ttc" id="abasic_string_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a></div></div>
</div><!-- fragment --><p >Images and tables can be read and written region-wise by mapping &ndash; possibly non-contiguous &ndash; in-file and in-memory regions, e.g.:</p>
<div class="fragment"><div class="line"><span class="comment">// Given:</span></div>
<div class="line"><span class="comment">// - ImageRaster raster: The image data unit handler</span></div>
<div class="line"><span class="comment">// - Raster data: The image container</span></div>
<div class="line"> </div>
<div class="line">Region&lt;2&gt; inFile {{32, 16}, {64, 32}};</div>
<div class="line">Position&lt;2&gt; inMemory {8, 8};</div>
<div class="line">raster.readRegionTo({inFile, inMemory}, data);</div>
</div><!-- fragment --><p >For binary tables, multiple columns can be read or written at once to take advantage of an internal buffer:</p>
<div class="fragment"><div class="line"><span class="comment">// Given:</span></div>
<div class="line"><span class="comment">// - BintableColumns columns: The binary table data unit handler</span></div>
<div class="line"><span class="comment">// - Column columnA, columnB, columnC: Column containers of various value types</span></div>
<div class="line"> </div>
<div class="line">columns.writeSeq(columnA, columnB, columnC);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md119"></a>
License</h1>
<p ><a class="el" href="md_LICENSE.html">LGPL-3.0-or-later</a></p>
<h1><a class="anchor" id="autotoc_md120"></a>
Tutorial</h1>
<p >The tutorial composed of an example program and <a href="https://cnes.github.io/EleFits/5.0.0/tuto.html">associated documentation</a> is probably the good entry point for newcomers.</p>
<h1><a class="anchor" id="autotoc_md121"></a>
Installation instructions</h1>
<p >See <a class="el" href="md_INSTALL.html">the dedicated page</a>.</p>
<h1><a class="anchor" id="autotoc_md122"></a>
User documentation</h1>
<p >The <a href="https://cnes.github.io/EleFits/5.0.0/modules.html">Modules page</a> is the main entry point for usage documentation. Each so-called documentation module addresses a specific topic to learn how to use EleFits and understand why it is designed the way it is. The API documentation of related namespaces, classes and functions is linked at the bottom of each module page.</p>
<p >To go further, many other topics are discussed in the <a href="https://cnes.github.io/EleFits/5.0.0/pages.html">Related pages</a>, as unordered documents. Among others, you'll find there thoughts on CFITSIO, the tutorial, and some design documentation.</p>
<h1><a class="anchor" id="autotoc_md123"></a>
Feedbacks</h1>
<p >Bug reports, reviews, change requests and other feedbacks are welcome! Feel free to <a href="https://github.com/CNES/EleFits/issues/new/choose">open issues</a> ;) </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<hr class="footer" />
<address class="footer"><small>
    © Copyright 2019-2022 CNES and contributors (for the Euclid Science Ground Segment).
    <br>
    The EleFits documentation is licensed under a
    <a rel="license" href="md_LICENSE.html">LGPL-3.0-or-later</a> license.
    <br>
    It is generated by <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.9.2
    with a theme adapted from <a href="https://github.com/jothepro/doxygen-awesome-css">Doxygen Awesome</a>
    and using <a href="https://github.com/tholman/github-corners">GitHub Corners</a>.
    Thank you all!
  </small></address>
</body>
</html>